<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã TP/SL –¥–ª—è –°–ø–æ—Ç–∞ –∏ –§—å—é—á–µ—Ä—Å–æ–≤</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      padding: 20px;
      max-width: 600px;
      margin: auto;
    }
    h2 {
      margin-top: 30px;
      text-align: center;
    }
    .calc-box {
      background: white;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-top: 15px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }
    button {
      margin-top: 15px;
      padding: 10px;
      width: 100%;
      font-size: 15px;
      border: none;
      border-radius: 8px;
      background: #007bff;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
    .result {
      margin-top: 10px;
      background: #f0f0f0;
      padding: 8px;
      border-radius: 6px;
      font-size: 14px;
    }
    .slider-container {
      margin-top: 10px;
    }
    .slider-value {
      font-weight: bold;
    }
    .position-switch {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
    }
    .position-btn {
      flex: 1;
      padding: 10px;
      margin: 0 5px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      border: none;
      font-size: 15px;
      transition: background 0.2s;
    }
    .long-btn.active {
      background: #28a745;
      color: white;
    }
    .short-btn.active {
      background: #dc3545;
      color: white;
    }
    .long-btn {
      background: #e6f4ea;
      color: #28a745;
    }
    .short-btn {
      background: #fbeaea;
      color: #dc3545;
    }
  </style>
</head>
<body>

  <!-- üìå –°–ü–û–¢ -->
  <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –°–ü–û–¢–ê</h2>
  <div class="calc-box">
    <label>–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞</label>
    <input type="number" id="spotEntry" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1.245" step="0.0001">

    <label>% –¢–µ–π–∫-–ü—Ä–æ—Ñ–∏—Ç–∞</label>
    <input type="number" id="spotTPPercent" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 3" step="0.01">
    <button onclick="calcSpotTP()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –¢–µ–π–∫-–ü—Ä–æ—Ñ–∏—Ç</button>
    <div class="result" id="spotTPResult"></div>

    <label>% –°—Ç–æ–ø-–õ–æ—Å—Å–∞</label>
    <input type="number" id="spotSLPercent" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2" step="0.01">
    <button onclick="calcSpotSL()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –°—Ç–æ–ø-–õ–æ—Å—Å</button>
    <div class="result" id="spotSLResult"></div>
  </div>

  <!-- üìå –§–¨–Æ–ß–ï–†–°–´ -->
  <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –§–¨–Æ–ß–ï–†–°–û–í</h2>
  <div class="calc-box">
    <label>–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞</label>
    <input type="number" id="futuresEntry" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1.245" step="0.0001">

    <!-- –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨ -->
    <div class="position-switch">
      <button id="longBtn" class="position-btn long-btn active" onclick="setPosition('long')">üü¢ –õ–æ–Ω–≥</button>
      <button id="shortBtn" class="position-btn short-btn" onclick="setPosition('short')">üî¥ –®–æ—Ä—Ç</button>
    </div>

    <div class="slider-container">
      <label>–ü–ª–µ—á–æ: <span id="leverageValue" class="slider-value">1x</span></label>
      <input type="range" id="leverageSlider" min="1" max="125" value="1" oninput="updateLeverage()">
    </div>

    <label>% –¢–µ–π–∫-–ü—Ä–æ—Ñ–∏—Ç–∞</label>
    <input type="number" id="futuresTPPercent" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 1" step="0.01">
    <button onclick="calcFuturesTP()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –¢–µ–π–∫-–ü—Ä–æ—Ñ–∏—Ç</button>
    <div class="result" id="futuresTPResult"></div>

    <label>% –°—Ç–æ–ø-–õ–æ—Å—Å–∞</label>
    <input type="number" id="futuresSLPercent" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 0.5" step="0.01">
    <button onclick="calcFuturesSL()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –°—Ç–æ–ø-–õ–æ—Å—Å</button>
    <div class="result" id="futuresSLResult"></div>
  </div>

  <script>
    // üìå –°–ü–û–¢ - –¢–µ–π–∫
    function calcSpotTP() {
      const entry = parseFloat(document.getElementById('spotEntry').value);
      const percent = parseFloat(document.getElementById('spotTPPercent').value);
      if (isNaN(entry) || isNaN(percent)) {
        document.getElementById('spotTPResult').textContent = '–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É –∏ –ø—Ä–æ—Ü–µ–Ω—Ç.';
        return;
      }
      const tpPrice = entry * (1 + percent / 100);
      document.getElementById('spotTPResult').textContent = `–¶–µ–Ω–∞ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–∞: ${tpPrice.toFixed(6)}`;
    }

    // üìå –°–ü–û–¢ - –°—Ç–æ–ø
    function calcSpotSL() {
      const entry = parseFloat(document.getElementById('spotEntry').value);
      const percent = parseFloat(document.getElementById('spotSLPercent').value);
      if (isNaN(entry) || isNaN(percent)) {
        document.getElementById('spotSLResult').textContent = '–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É –∏ –ø—Ä–æ—Ü–µ–Ω—Ç.';
        return;
      }
      const slPrice = entry * (1 - percent / 100);
      document.getElementById('spotSLResult').textContent = `–¶–µ–Ω–∞ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞: ${slPrice.toFixed(6)}`;
    }

    // üìå –ü–æ–∑–∏—Ü–∏—è —Ñ—å—é—á–µ—Ä—Å–æ–≤
    let positionType = 'long';
    function setPosition(type) {
      positionType = type;
      document.getElementById('longBtn').classList.toggle('active', type === 'long');
      document.getElementById('shortBtn').classList.toggle('active', type === 'short');
    }

    // üìå –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–µ—á–∞
    function updateLeverage() {
      const value = document.getElementById('leverageSlider').value;
      document.getElementById('leverageValue').textContent = `${value}x`;
    }

    // üìå –§–¨–Æ–ß–ï–†–°–´ - –¢–µ–π–∫
    function calcFuturesTP() {
      const entry = parseFloat(document.getElementById('futuresEntry').value);
      const percent = parseFloat(document.getElementById('futuresTPPercent').value);
      const leverage = parseFloat(document.getElementById('leverageSlider').value);
      if (isNaN(entry) || isNaN(percent) || isNaN(leverage)) {
        document.getElementById('futuresTPResult').textContent = '–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É –∏ –ø—Ä–æ—Ü–µ–Ω—Ç.';
        return;
      }
      const priceChange = percent / leverage;
      const tpPrice = positionType === 'long'
        ? entry * (1 + priceChange / 100)
        : entry * (1 - priceChange / 100);
      document.getElementById('futuresTPResult').textContent =
        `–¶–µ–Ω–∞ —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç–∞ (${positionType === 'long' ? '–õ–æ–Ω–≥' : '–®–æ—Ä—Ç'}): ${tpPrice.toFixed(6)} (–¥–≤–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã ‚âà ${priceChange.toFixed(4)}%)`;
    }

    // üìå –§–¨–Æ–ß–ï–†–°–´ - –°—Ç–æ–ø
    function calcFuturesSL() {
      const entry = parseFloat(document.getElementById('futuresEntry').value);
      const percent = parseFloat(document.getElementById('futuresSLPercent').value);
      const leverage = parseFloat(document.getElementById('leverageSlider').value);
      if (isNaN(entry) || isNaN(percent) || isNaN(leverage)) {
        document.getElementById('futuresSLResult').textContent = '–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É –∏ –ø—Ä–æ—Ü–µ–Ω—Ç.';
        return;
      }
      const priceChange = percent / leverage;
      const slPrice = positionType === 'long'
        ? entry * (1 - priceChange / 100)
        : entry * (1 + priceChange / 100);
      document.getElementById('futuresSLResult').textContent =
        `–¶–µ–Ω–∞ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ (${positionType === 'long' ? '–õ–æ–Ω–≥' : '–®–æ—Ä—Ç'}): ${slPrice.toFixed(6)} (–¥–≤–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã ‚âà ${priceChange.toFixed(4)}%)`;
    }
  </script>
</body>
</html>
