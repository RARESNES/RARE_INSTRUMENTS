<main id="mainContent">

  <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä TP/SL</h1>
  <p>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è —Å–ø–æ—Ç–∞ –∏ —Ñ—å—é—á–µ—Ä—Å–æ–≤ —Å –ø–ª–µ—á–æ–º –∏ –≤—ã–±–æ—Ä–æ–º –õ–æ–Ω–≥/–®–æ—Ä—Ç.</p>

  <!-- –°–ü–û–¢ -->
  <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –°–ü–û–¢–ê</h2>
  <div class="calc-row">
    <label>–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞</label>
    <input type="number" id="spotEntry" placeholder="1.245" step="0.0001">

    <label>% –¢–µ–π–∫-–ü—Ä–æ—Ñ–∏—Ç–∞</label>
    <input type="number" id="spotTPPercent" placeholder="3" step="0.01">
    <button onclick="calcSpotTP()">TP</button>

    <label>% –°—Ç–æ–ø-–õ–æ—Å—Å–∞</label>
    <input type="number" id="spotSLPercent" placeholder="2" step="0.01">
    <button onclick="calcSpotSL()">SL</button>
  </div>

  <table id="resultsTable">
    <thead>
      <tr>
        <th>–¢–∏–ø</th>
        <th>–¶–µ–Ω–∞</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>TP –°–ø–æ—Ç</td>
        <td id="spotTPResult">‚Äî</td>
      </tr>
      <tr>
        <td>SL –°–ø–æ—Ç</td>
        <td id="spotSLResult">‚Äî</td>
      </tr>
    </tbody>
  </table>

  <!-- –§–¨–Æ–ß–ï–†–°–´ -->
  <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –§–¨–Æ–ß–ï–†–°–û–í</h2>

  <div class="calc-row">
    <label>–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞</label>
    <input type="number" id="futuresEntry" placeholder="1.245" step="0.0001">

    <div>
      <button id="longBtn" class="active" onclick="setPosition('long')">üü¢ –õ–æ–Ω–≥</button>
      <button id="shortBtn" onclick="setPosition('short')">üî¥ –®–æ—Ä—Ç</button>
    </div>

    <label>–ü–ª–µ—á–æ</label>
    <input type="range" id="leverageSlider" min="1" max="125" value="1" oninput="updateLeverage()">
    <span id="leverageValue">1x</span>

    <label>% –¢–µ–π–∫-–ü—Ä–æ—Ñ–∏—Ç–∞</label>
    <input type="number" id="futuresTPPercent" placeholder="1" step="0.01">
    <button onclick="calcFuturesTP()">TP</button>

    <label>% –°—Ç–æ–ø-–õ–æ—Å—Å–∞</label>
    <input type="number" id="futuresSLPercent" placeholder="0.5" step="0.01">
    <button onclick="calcFuturesSL()">SL</button>
  </div>

  <table id="resultsTable">
    <thead>
      <tr>
        <th>–¢–∏–ø</th>
        <th>–¶–µ–Ω–∞</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>TP –§—å—é—á–µ—Ä—Å</td>
        <td id="futuresTPResult">‚Äî</td>
      </tr>
      <tr>
        <td>SL –§—å—é—á–µ—Ä—Å</td>
        <td id="futuresSLResult">‚Äî</td>
      </tr>
    </tbody>
  </table>

</main>

<script>
  // ---------------- –°–ü–û–¢ ----------------
  function calcSpotTP() {
    const entry = parseFloat(document.getElementById('spotEntry').value);
    const percent = parseFloat(document.getElementById('spotTPPercent').value);
    if(isNaN(entry) || isNaN(percent)) { 
      document.getElementById('spotTPResult').textContent = '‚Äî';
      return; 
    }
    const tpPrice = entry*(1+percent/100);
    document.getElementById('spotTPResult').textContent = tpPrice.toFixed(6);
  }

  function calcSpotSL() {
    const entry = parseFloat(document.getElementById('spotEntry').value);
    const percent = parseFloat(document.getElementById('spotSLPercent').value);
    if(isNaN(entry) || isNaN(percent)) { 
      document.getElementById('spotSLResult').textContent = '‚Äî';
      return; 
    }
    const slPrice = entry*(1-percent/100);
    document.getElementById('spotSLResult').textContent = slPrice.toFixed(6);
  }

  // ---------------- –§–¨–Æ–ß–ï–†–° ----------------
  let positionType = 'long';
  function setPosition(type) {
    positionType = type;
    document.getElementById('longBtn').classList.toggle('active', type==='long');
    document.getElementById('shortBtn').classList.toggle('active', type==='short');
  }

  function updateLeverage() {
    const value = document.getElementById('leverageSlider').value;
    document.getElementById('leverageValue').textContent = value+'x';
  }

  function calcFuturesTP() {
    const entry = parseFloat(document.getElementById('futuresEntry').value);
    const percent = parseFloat(document.getElementById('futuresTPPercent').value);
    const leverage = parseFloat(document.getElementById('leverageSlider').value);
    if(isNaN(entry) || isNaN(percent) || isNaN(leverage)) { 
      document.getElementById('futuresTPResult').textContent='‚Äî'; 
      return; 
    }
    const priceChange = percent / leverage;
    const tpPrice = positionType==='long'? entry*(1+priceChange/100) : entry*(1-priceChange/100);
    document.getElementById('futuresTPResult').textContent = tpPrice.toFixed(6);
  }

  function calcFuturesSL() {
    const entry = parseFloat(document.getElementById('futuresEntry').value);
    const percent = parseFloat(document.getElementById('futuresSLPercent').value);
    const leverage = parseFloat(document.getElementById('leverageSlider').value);
    if(isNaN(entry) || isNaN(percent) || isNaN(leverage)) { 
      document.getElementById('futuresSLResult').textContent='‚Äî'; 
      return; 
    }
    const priceChange = percent / leverage;
    const slPrice = positionType==='long'? entry*(1-priceChange/100) : entry*(1+priceChange/100);
    document.getElementById('futuresSLResult').textContent = slPrice.toFixed(6);
  }
</script>
