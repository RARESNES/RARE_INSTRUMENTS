<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto Buy Signals</title>
<style>
    body { font-family: Arial, sans-serif; background: #1a1a1a; color: #f0f0f0; margin:0; padding:0; }
    header { background: #ff9900; color: #000; padding: 15px; text-align: center; font-size: 18px; font-weight: bold; }
    header a { color: #000; text-decoration: none; }
    .info { background: #222; padding: 10px; text-align: center; font-size: 14px; color: #ccc; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #444; padding: 10px; text-align: center; }
    th { background: #333; }
    td { background: #222; }
    .alert { color: #ff4d4d; font-weight: bold; }
</style>
</head>
<body>

<header>
    Trade Cryptocurrency on Binance! <a href="https://www.binance.com/en?ref=OTHER" target="_blank">Join Here</a>
</header>

<div class="info">
    Keep this page open to receive real-time crypto buy signals.
</div>

<label style="display:block; text-align:center; margin-top:10px;">
  <input type="checkbox" id="notifyToggle"> Notify on new signals
</label>

<table id="signalsTable">
  <thead>
    <tr>
      <th>Coin</th>
      <th>Current Price (USDT)</th>
      <th>RSI (5m)</th>
      <th>Take Profit (+11%)</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>

<audio id="alertSound" src="https://www.soundjay.com/button/beep-07.wav"></audio>

<script>
const notifyToggle = document.getElementById('notifyToggle');
const tableBody = document.querySelector('#signalsTable tbody');
const alertSound = document.getElementById('alertSound');

let knownSignals = {};

// –°–ø–∏—Å–æ–∫ —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å
const excludeStables = ['USDC','BUSD','DAI','TUSD','USDP','FDUSD'];

async function fetchSymbols() {
    const res = await fetch('https://api.binance.com/api/v3/exchangeInfo');
    const data = await res.json();
    return data.symbols
        .filter(s => s.quoteAsset === 'USDT' && s.status === 'TRADING' && !excludeStables.includes(s.baseAsset))
        .map(s => s.symbol);
}

// –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è RSI
function calculateRSI(closes, period = 14) {
    if (closes.length < period) return null;
    let gains = 0, losses = 0;
    for (let i = 1; i < period; i++) {
        let diff = closes[i] - closes[i-1];
        if (diff >= 0) gains += diff;
        else losses -= diff;
    }
    let rs = gains / (losses || 1);
    return 100 - (100 / (1 + rs));
}

async function fetchRSI(symbol) {
    const res = await fetch(`https://api.binance.com/api/v3/klines?symbol=${symbol}&interval=5m&limit=15`);
    const data = await res.json();
    const closes = data.map(c => parseFloat(c[4])); // close price
    return calculateRSI(closes);
}

async function fetchPrice(symbol) {
    const res = await fetch(`https://api.binance.com/api/v3/ticker/price?symbol=${symbol}`);
    const data = await res.json();
    return parseFloat(data.price);
}

async function updateSignals() {
    const symbols = await fetchSymbols();
    const newSignals = [];

    for (let symbol of symbols) {
        const rsi = await fetchRSI(symbol);
        if (rsi !== null && rsi < 5) { // RSI threshold
            const price = await fetchPrice(symbol);
            const takeProfit = (price * 1.11).toFixed(4);
            newSignals.push({symbol, price, rsi: rsi.toFixed(2), takeProfit});
        }
    }

    renderTable(newSignals);

    // Notifications
    if (notifyToggle.checked) {
        for (let s of newSignals) {
            if (!knownSignals[s.symbol]) {
                alertSound.play();
            }
            knownSignals[s.symbol] = true;
        }
    }
}

function renderTable(signals) {
    tableBody.innerHTML = '';
    if (signals.length === 0) {
        tableBody.innerHTML = '<tr><td colspan="4" class="alert">No coins meet the RSI condition now. Waiting for new signals...</td></tr>';
        return;
    }
    for (let s of signals) {
        const row = document.createElement('tr');
        row.innerHTML = `<td>${s.symbol}</td><td>${s.price}</td><td>${s.rsi}</td><td>${s.takeProfit}</td>`;
        tableBody.appendChild(row);
    }
}

// Auto refresh every 30 seconds
updateSignals();
setInterval(updateSignals, 30000);

// Optional: reload page every 5 minutes to reset memory and ensure fresh data
setInterval(() => location.reload(), 300000);

</script>
<!-- David Paul Strategy Section -->
<div style="background:#111; color:#f0f0f0; padding:20px; margin-top:40px; border-top: 2px solid #ff9900; border-radius:8px;">
  <h2 style="text-align:center; color:#ff9900;">David Paul Trading Strategy</h2>
  <ul style="line-height:1.8; max-width:800px; margin:0 auto; padding-left:20px;">
    <li>üí∞ Use <strong>1% of your capital</strong> per open position.</li>
    <li>üéØ Take Profit: <strong>4-20%</strong> depending on your risk appetite.</li>
    <li>üìà <strong>Spot trading only</strong> ‚Äî never use futures.</li>
    <li>üö´ No stop losses ‚Äî manage trades carefully.</li>
    <li>ü¶∑ Work like a dentist who carefully treats each tooth and doesn‚Äôt think about money. The money will take care of itself. ‚Äî <em>Professor, mathematician & trader David Paul</em></li>
  </ul>
</div>

</body>
</html>
