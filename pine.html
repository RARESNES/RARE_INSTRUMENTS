<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Как создать свой индикатор для TredingView с Pine и ChatGPT</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="header"></div>
  <div id="sidebar"></div>
  
  <main>
    <h1>Простая инструкция создания индикатора на Pine</h1>
<div style="white-space: pre-line; text-align: left;">

<img src="chatgpt.jpg" alt="ChatGPT" />
Для создания потребуется СhatGPT <a href="https://chatgpt.com" target="_blank"> Перейти на сайт ChatGPT</a> (для доступа к сайту необходим VPN) или любой его аналог Duck.ai, Leo AI Brave.
Опишите чату гпт в текстовом виде каким вы хотите видеть ваш индикатор. ГПТ даст вам код. Скопируйте этот код и откройте ТрейдингВью на странице График (Chart), под графиком сразу открыт редактор Pine. 
Выделите весь код в нем, удалите его и вставьте свой код от чата гпт и нажмите кнопку Обновить на графике. Если чат гпт с первого раза написал правильный код то гравик должен появиться на графике или под графиком в зависимости от типа индикатора.
Если код неправильный, то снизу под кодом будут показаны ошибки, скопируйте их и отправьте чату гпт, он исправит код после чего вставьте исправленный код еще раз. Если снова не работает, отправляете ошибки чату гпт еще столько раз пока не заработает. 
У меня таких кругов было штук 5 или больше пока индикатор не заработал. 
У вас версия гпт может быть уже сильно умнее и возможно получиться с первого раза. После того как индикатор заработал и он вас устраивает, то просто сохраняете его, можно отредактировать название. 
Можно сделать индикатор публичным и делиться им с другими пользователями ТрейдингВью, но только с платной подпиской.

Вот мой код который написал мне гпт для оценки волатильности монет от 1 до 10. Можете скопировать его и сохранить.

<article>
  <h1>Пример индикатора RSI на Pine Script</h1>
  <p>Ниже приведён пример кода простого индикатора RSI для TradingView:</p>

<p style="color: green;">

//@version=6
indicator('Volatility Score (0-10)', overlay = false, shorttitle = 'VOL10')

// === Параметры ===
len = input.int(100, 'History window (bars)', minval = 10)
atrLen = input.int(14, 'ATR length', minval = 1)
smooth = input.int(3, 'Smoothing (MA) for ATR', minval = 1)
method = input.string('SMA', 'Smoothing method', options = ['SMA', 'EMA', 'WMA'])

// === Вычисления ===
// ATR (True Range -> ATR)
tr = ta.tr(true)
atr_raw = ta.rma(tr, atrLen)
atr_sm = switch method
    'SMA' => ta.sma(atr_raw, smooth)
    'EMA' => ta.ema(atr_raw, smooth)
    'WMA' => ta.wma(atr_raw, smooth)
    => ta.sma(atr_raw, smooth)

// Нормализация ATR: делим на close для относительной волатильности
atr_rel = atr_sm / close

// Исторические мин/макс за окно
atr_min = ta.lowest(atr_rel, len)
atr_max = ta.highest(atr_rel, len)
// Защита от деления на ноль
atr_range = math.max(atr_max - atr_min, 1e-12)

// Нормализованное значение в диапазоне 0..1
n = (atr_rel - atr_min) / atr_range
n_clamped = math.max(0.0, math.min(1.0, n))

// Перевод в 0..10, округление до целого (0..10)
score = math.round(n_clamped * 10.0)

// Опционально: сглаженный счет (плавнее отображение)
smoothScore = ta.ema(score, 3)

// === Отображение ===
plot(score, title = 'Volatility Score', color = color.new(color.blue, 0), linewidth = 2)
plot(smoothScore, title = 'Smoothed Score', color = color.new(color.orange, 0), linewidth = 1)
hline(2, 'Low threshold', color = color.new(color.green, 70))
hline(5, 'Medium threshold', color = color.new(color.yellow, 70))
hline(8, 'High threshold', color = color.new(color.red, 70))

// Плашка с числом
var label lbl = na
if barstate.islast
    label.delete(lbl)
    lbl := label.new(x = bar_index, y = high, text = 'Vol: ' + str.tostring(score) + '/10', style = label.style_label_right, color = color.new(color.blue, 90), textcolor = color.white, size = size.normal)
    lbl

// Цветовая заливка фона по уровню волатильности
bgcolor(score >= 8 ? color.new(color.red, 90) : score >= 5 ? color.new(color.yellow, 90) : color.new(color.green, 92))

// Tooltip / комментарии в окне данных
plotchar(score, title = 'Score (char)', location = location.top, char = '●', color = color.new(color.blue, 0), size = size.tiny)

  <p>Этот код можно вставить прямо в Pine Editor на сайте TradingView...</p>
</article>

<img src="pine.jpg" alt="Pine" />


</div>
  </main>

  <script>
    // Подгружаем header и sidebar
    fetch('header.html')
      .then(res => res.text())
      .then(data => document.getElementById('header').innerHTML = data);

    fetch('sidebar.html')
      .then(res => res.text())
      .then(data => document.getElementById('sidebar').innerHTML = data);
  </script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EEZSLT2L6C"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KH63Z4DFJ2');
</script>

</body>
</html>
