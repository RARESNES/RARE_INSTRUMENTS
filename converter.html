<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Крипто Конвертер</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  input, button { padding: 10px; font-size: 16px; margin-right: 10px; }
  #result { margin-top: 20px; font-weight: bold; }
</style>
</head>
<body>

<h2>Конвертер криптовалют</h2>
<input type="text" id="tickers" placeholder="Введите тикеры, например: DODO CAKE" />
<button onclick="convertCrypto()">Конвертировать</button>

<div id="result"></div>

<script>
async function convertCrypto() {
    const input = document.getElementById('tickers').value.trim();
    if(!input) return alert("Введите тикеры!");

    const tickers = input.split(/\s+/).map(t => t.toLowerCase());
    
    try {
        // Получаем список всех монет с CoinGecko
        const coinsListRes = await fetch('https://api.coingecko.com/api/v3/coins/list');
        const coinsList = await coinsListRes.json();

        let ids = [];
        tickers.forEach(ticker => {
            const coin = coinsList.find(c => c.symbol.toLowerCase() === ticker);
            if(coin) ids.push(coin.id);
        });

        if(ids.length === 0) {
            document.getElementById('result').innerText = "Тикеры не найдены!";
            return;
        }

        // Получаем цены в USD
        const priceRes = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids.join(',')}&vs_currencies=usd`);
        const prices = await priceRes.json();

        let output = "";
        tickers.forEach(ticker => {
            const coin = coinsList.find(c => c.symbol.toLowerCase() === ticker);
            if(coin && prices[coin.id]) {
                output += `${ticker.toUpperCase()}: $${prices[coin.id].usd}\n`;
            } else {
                output += `${ticker.toUpperCase()}: не найдено\n`;
            }
        });

        document.getElementById('result').innerText = output;
    } catch (e) {
        console.error(e);
        document.getElementById('result').innerText = "Ошибка получения данных!";
    }
}
</script>

</body>
</html>
